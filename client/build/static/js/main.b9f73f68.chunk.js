(this.webpackJsonpShoppies=this.webpackJsonpShoppies||[]).push([[0],{124:function(e,t){},127:function(e,t,n){},128:function(e,t,n){},129:function(e,t,n){},130:function(e,t,n){},131:function(e,t,n){},132:function(e,t,n){},133:function(e,t,n){},134:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(1),c=n.n(a),s=n(27),i=n.n(s),o=n(14),l=n(15),u=n(30),j=n(63),b=n(64),d={count:0},p={key:"root",storage:n.n(b).a};var h=Object(u.a)(p,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INCREMENT":return{count:e.count+1};case"DECREMENT":return{count:e.count-1};default:return e}})),m=n(6),O=n(4),f=n(7),x=n(65),v=n(2),N=n.n(v),g=n(5),w="https://https://shoppies-2021.herokuapp.com/";function k(e,t){return y.apply(this,arguments)}function y(){return(y=Object(g.a)(N.a.mark((function e(t,n){var r,a,c;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)},console.log(n),e.prev=2,t({type:"REQUEST_LOGIN"}),e.next=6,fetch("".concat(w,"/auth/login"),r);case 6:return a=e.sent,e.next=9,a.json();case 9:if(!(c=e.sent).username||!c.id){e.next=13;break}return t({type:"LOGIN_SUCCESS",payload:c}),e.abrupt("return",c);case 13:return t({type:"LOGIN_ERROR",error:c.errors[0]}),e.abrupt("return");case 17:e.prev=17,e.t0=e.catch(2),t({type:"LOGIN_ERROR",error:e.t0});case 20:case"end":return e.stop()}}),e,null,[[2,17]])})))).apply(this,arguments)}var S=n(8),C=n(16),E=n.n(C);n(94).config();var P={getUser:function(){return Object(g.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",E.a.get("/user"));case 1:case"end":return e.stop()}}),e)})))()},signup:function(e){return Object(g.a)(N.a.mark((function t(){return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",E.a.post("/auth/signup",e));case 1:case"end":return t.stop()}}),t)})))()},getMovies:function(){return Object(g.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.a.get("/api/movies");case 3:return t=e.sent,e.abrupt("return",t.data);case 7:return e.prev=7,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))()},searchMovies:function(e){var t=this;return Object(g.a)(N.a.mark((function n(){var r,a,c;return N.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,E.a.get("".concat("https://www.omdbapi.com/?s=").concat(e,"&apikey=").concat("ca5d47fc"));case 3:if(0!==(r=n.sent).data.totalItems){n.next=6;break}return n.abrupt("return",!1);case 6:return n.next=8,t.getMovies();case 8:return a=n.sent,c=r.data.Search.filter((function(e){return!a.some((function(t){return t.id===e.imdbID}))})).filter((function(e){return"movie"===e.Type})).map((function(e){return{key:e.imdbID,title:e.Title,poster:e.Poster,year:e.Year}})),n.abrupt("return",c);case 13:return n.prev=13,n.t0=n.catch(0),console.log(n.t0),n.abrupt("return",!1);case 17:case"end":return n.stop()}}),n,null,[[0,13]])})))()},saveMovies:function(e){return Object(g.a)(N.a.mark((function t(){var n;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,E.a.post("/api/movies",e);case 3:return n=t.sent,t.abrupt("return",n);case 7:return t.prev=7,t.t0=t.catch(0),console.log(t.t0),t.abrupt("return",!1);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})))()},deleteMovie:function(e){return Object(g.a)(N.a.mark((function t(){var n;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,E.a.delete("/api/movies/".concat(e));case 3:return n=t.sent,t.abrupt("return",n);case 7:return t.prev=7,t.t0=t.catch(0),console.log(t.t0),t.abrupt("return",!1);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})))()}},I=P.getUser(),R={user:I.username,id:I.id,loading:!1,errorMessage:null},M=function(e,t){switch(t.type){case"REQUEST_LOGIN":return Object(f.a)(Object(f.a)({},e),{},{loading:!0});case"LOGIN_SUCCESS":return Object(f.a)(Object(f.a)({},e),{},{user:t.payload.username,id:t.payload.id,loading:!1});case"LOGOUT":return Object(f.a)(Object(f.a)({},e),{},{user:"",id:""});case"LOGIN_ERROR":return Object(f.a)(Object(f.a)({},e),{},{loading:!1,errorMessage:t.error});default:throw new Error("Unhandled action type: ".concat(t.type))}},B=c.a.createContext(),L=c.a.createContext();var T=function(e){var t=e.children,n=Object(a.useReducer)(M,R),c=Object(S.a)(n,2),s=c[0],i=c[1];return Object(r.jsx)(B.Provider,{value:s,children:Object(r.jsx)(L.Provider,{value:i,children:t})})},_=function(e){var t=e.component,n=e.path,a=e.isPrivate,s=Object(x.a)(e,["component","path","isPrivate"]),i=function(){var e=c.a.useContext(B);if(void 0===e)throw new Error("useAuthState must be used within a AuthProvider");return e}();return Object(r.jsx)(O.b,Object(f.a)({path:n,render:function(e){return a&&!i.user?Object(r.jsx)(O.a,{to:{pathname:"/login"}}):Object(r.jsx)(t,Object(f.a)({},e))}},s))},D=n(21);n(98);var G=function(){var e=Object(a.useState)(),t=Object(S.a)(e,2),n=t[0],s=t[1],i=Object(a.useState)(!1),o=Object(S.a)(i,2),l=o[0],u=o[1],j=Object(a.useState)({username:"",password:""}),b=Object(S.a)(j,2),d=b[0],p=b[1],h=function(){var e=c.a.useContext(L);if(void 0===e)throw new Error("useAuthDispatch must be used within a AuthProvider");return e}(),x=Object(O.g)(),v=function(e){p(Object(f.a)(Object(f.a)({},d),{},Object(D.a)({},e.target.name,e.target.value)))},w=function(){var e=Object(g.a)(N.a.mark((function e(t){var n,r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=d.username,r=d.password,s(""),n&&r){e.next=6;break}return s("Please fill all fields!"),e.abrupt("return");case 6:return e.prev=6,e.next=9,k(h,d);case 9:if(e.sent.username){e.next=13;break}return s("Login failed. Please try again!"),e.abrupt("return");case 13:s("Login successful!"),x.push("/search"),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(6),s("Login failed. Please try again!"),console.log(e.t0);case 21:case"end":return e.stop()}}),e,null,[[6,17]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsx)("div",{className:"home",children:Object(r.jsxs)("form",{className:"loginForm",children:[Object(r.jsxs)("h1",{className:"title",children:["SH",Object(r.jsx)("i",{className:"fas fa-award"}),"PPIES"]}),Object(r.jsx)("p",{className:"login-desc text-center",children:"If you already have a ticket, enter your information below. Otherwise reserve your spot at the Box Office."}),Object(r.jsx)("div",{children:Object(r.jsxs)("label",{htmlFor:"username",children:["Guest Name:",Object(r.jsx)("input",{type:"text",name:"username",onChange:v,placeholder:"Guest",required:!0})]})}),Object(r.jsx)("div",{children:Object(r.jsxs)("label",{htmlFor:"password",children:["Password:",Object(r.jsx)("input",{type:l?"text":"password",name:"password",onChange:v,placeholder:"Password",required:!0}),Object(r.jsx)("i",{className:"fas fa-eye",onClick:function(){u(!l)}})]})}),Object(r.jsxs)("div",{className:"formBtn",children:[Object(r.jsxs)("button",{name:"login",className:"loginBtn",type:"submit",onClick:w,children:[Object(r.jsx)("i",{className:"fas fa-door-open"})," ",Object(r.jsx)("span",{children:"Enter"})]}),Object(r.jsx)(m.b,{to:"/signup",children:Object(r.jsxs)("button",{name:"signup",className:"loginBtn",type:"button",children:[Object(r.jsx)("i",{className:"fas fa-ticket-alt"})," ",Object(r.jsx)("span",{children:"Box Office"})]})})]}),n&&Object(r.jsx)("h5",{className:"text-center",children:n})]})})},F=n(29),A=n.n(F);n(127);var U=function(e){var t=e.alert,n=e.buttonClick;return Object(r.jsxs)("div",{className:"alert alert-success",role:"alert",children:["Your movie:"," ",Object(r.jsx)("a",{href:"https://www.imdb.com/title/".concat(t.key),rel:"noreferrer",target:"_blank",className:"alert-link",children:t.title})," ","has been nominated! Check out the IMDB.",Object(r.jsx)("button",{type:"button",className:"close","aria-label":"Close",onClick:n,children:Object(r.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]})},q=(n(128),function(){return Object(r.jsx)("div",{className:"bannerImage"})});n(129);var J=function(e){var t=e.movie,n=e.buttonClick,a=e.type,c=t.title,s=t.year,i=t.poster,o=t.key;return Object(r.jsx)("div",{className:"movieCard col-12 col-sm-12 col-md-6 col-lg-4",children:Object(r.jsxs)("div",{className:"card h-100 mb-4",children:[Object(r.jsx)("div",{className:"card-header",children:Object(r.jsx)("h5",{className:"card-title m-0 p-0 font-weight-bolder",children:c})}),Object(r.jsxs)("div",{className:"card-body text-left",children:[o?Object(r.jsx)("a",{href:"https://www.imdb.com/title/".concat(o),rel:"noreferrer",target:"_blank",children:Object(r.jsx)("img",{className:"resultsImg",src:i,alt:"movie poster"})}):Object(r.jsx)("img",{className:"resultsImg",src:i,alt:"movie poster"}),Object(r.jsx)("div",{className:"promotion-promo",children:s}),Object(r.jsxs)("div",{className:"promotion-price",children:[Object(r.jsx)("div",{className:"promotion-price-desc",children:"2021"}),Object(r.jsx)("div",{className:"promotion-price-text",children:"Shoppie"})]})]}),n&&Object(r.jsx)("div",{className:"card-footer",children:Object(r.jsx)("button",{type:"button",className:"btn btn-warning",onClick:function(){return n(t)},children:a})})]})})};n(130);var Y=function(){return Object(r.jsxs)("nav",{className:"navbar navbar-expand-lg",children:[Object(r.jsx)(m.b,{to:"/search",className:"navbar-brand",children:"Shoppies"}),Object(r.jsx)(m.b,{to:"/nominated",className:"navbar-brand",children:Object(r.jsx)("small",{children:"Nominess"})}),Object(r.jsx)(m.b,{to:"/nominated",className:"navbar-brand",children:Object(r.jsx)("small",{children:"Awards"})})]})};n(131);var H=function(){return Object(r.jsxs)("div",{className:"footer-container",children:[Object(r.jsx)("div",{className:"footer-links",children:Object(r.jsxs)("div",{className:"footer-link-wrapper",children:[Object(r.jsx)(m.b,{to:"/search",children:Object(r.jsx)("h2",{children:"Home"})}),Object(r.jsx)(m.b,{to:"/nominated",children:Object(r.jsx)("h2",{children:"Nominees"})}),Object(r.jsx)(m.b,{to:"/nominated",children:Object(r.jsx)("h2",{children:"Awards"})})]})}),Object(r.jsxs)("div",{className:"footer-socials",children:[Object(r.jsx)("div",{className:"footer-logo",children:Object(r.jsx)("img",{src:"/images/logo.gif",alt:"Shoppies Logo",className:"footerLogo"})}),Object(r.jsxs)("div",{className:"footer-socials-wrapper",children:[Object(r.jsx)("small",{className:"footer-rights",children:"Copyright \xa9 2021 Shoppy Awards"}),Object(r.jsx)("br",{}),Object(r.jsx)("br",{}),Object(r.jsx)("small",{className:"footer-rights",children:"All Rights Reserved."}),Object(r.jsxs)("div",{className:"social-icons",children:[Object(r.jsx)(m.b,{className:"social-icon-link facebook",to:"/facebook",target:"_blank","aria-label":"Facebook",children:Object(r.jsx)("i",{className:"fa fa-facebook-square"})}),Object(r.jsx)(m.b,{className:"social-icon-link linkedin",to:"/linkedin",target:"_blank","aria-label":"linkedIn",children:Object(r.jsx)("i",{className:"fa fa-linkedin"})}),Object(r.jsx)(m.b,{className:"social-icon-link twitter",to:"/twitter",target:"_blank","aria-label":"Twitter",children:Object(r.jsx)("i",{className:"fa fa-twitter"})})]})]})]})]})},Q=A()();var V=function(){var e=Object(a.useState)([]),t=Object(S.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)(),i=Object(S.a)(s,2),o=i[0],u=i[1];Object(a.useEffect)((function(){Q.on("saved",(function(e){u(e)}))}));var j=Object(l.c)((function(e){return e.count})),b=Object(l.b)();function d(e){return p.apply(this,arguments)}function p(){return(p=Object(g.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.deleteMovie(t._id);case 2:c(n.filter((function(e){return e!==t}))),b({type:"DECREMENT"});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)(Object(g.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=c,e.next=3,P.getMovies();case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)}))),[]),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(Y,{}),Object(r.jsx)(q,{}),o?Object(r.jsx)(U,{alert:o,buttonClick:function(){u(null)}}):null,Object(r.jsxs)("h3",{className:"text-center",children:[Object(r.jsx)("i",{className:"fas fa-download"}),"Your Nominees -"," ",j,"/5 Selected"]}),Object(r.jsx)("div",{className:"container",children:Object(r.jsx)("div",{className:"row",children:Object(r.jsx)("div",{className:"mx-auto",children:Object(r.jsx)("div",{className:"col-lg-12",children:Object(r.jsx)("div",{className:"card-deck",children:n.length?n.map((function(e){return Object(r.jsx)(J,{movie:e,buttonClick:d,type:"REMOVE"},e.imdbID)})):Object(r.jsx)("h4",{className:"text-center",children:"No Saved Movies"})})})})})}),Object(r.jsx)(H,{})]})},X=(n(132),A()());var z=[{path:"/login",component:G,isPrivate:!1},{path:"/signup",component:function(){var e=Object(a.useState)(),t=Object(S.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)(!1),i=Object(S.a)(s,2),o=i[0],l=i[1],u=Object(a.useState)({username:"",password:""}),j=Object(S.a)(u,2),b=j[0],d=j[1],p=Object(O.g)(),h=function(e){d(Object(f.a)(Object(f.a)({},b),{},Object(D.a)({},e.target.name,e.target.value)))},x=function(){var e=Object(g.a)(N.a.mark((function e(t){var n,r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=b.username,r=b.password,n&&r){e.next=5;break}return c("Username and password must be filled"),e.abrupt("return");case 5:return c("Purchase Successful!"),e.prev=6,e.next=9,P.signup(b);case 9:p.push("/"),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(6),console.log(e.t0),c("Sorry, signup request unsuccessful. Please try again!"),setInterval((function(){return c(null)}),3e3);case 17:case"end":return e.stop()}}),e,null,[[6,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsx)("div",{className:"home",children:Object(r.jsxs)("form",{className:"loginForm",children:[Object(r.jsxs)("h1",{className:"title",children:[" Box Office ",Object(r.jsx)("i",{className:"fas fa-ticket-alt"})]}),Object(r.jsx)("p",{className:"login-desc text-center",children:"Please enter your name and an identifying password before entry."}),Object(r.jsx)("div",{children:Object(r.jsxs)("label",{htmlFor:"username",children:["Enter Name:",Object(r.jsx)("input",{type:"text",name:"username",onChange:h,placeholder:"Guest",required:!0})]})}),Object(r.jsx)("div",{children:Object(r.jsxs)("label",{htmlFor:"password",children:["Password:",Object(r.jsx)("input",{type:o?"text":"password",name:"password",onChange:h,placeholder:"Password",required:!0}),Object(r.jsx)("i",{className:"fas fa-eye",onClick:function(){l(!o)}})]})}),Object(r.jsxs)("div",{className:"formBtn",children:[Object(r.jsx)(m.b,{to:"/",children:Object(r.jsxs)("button",{name:"back",className:"loginBtn",type:"button",children:[Object(r.jsx)("i",{className:"fas fa-long-arrow-alt-left"})," Go Back"]})}),Object(r.jsxs)("button",{name:"signup",className:"loginBtn",type:"button",onClick:x,children:[Object(r.jsx)("i",{className:"fa fa-shopping-cart"})," Buy Ticket"]})]}),n&&Object(r.jsx)("h5",{className:"text-center",children:n})]})})},isPrivate:!1},{path:"/nominated",component:V,isPrivate:!0},{path:"/search",component:function(){var e=Object(a.useState)(),t=Object(S.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)(),i=Object(S.a)(s,2),o=i[0],u=i[1],j=Object(a.useState)(),b=Object(S.a)(j,2),d=b[0],p=b[1];Object(a.useEffect)((function(){X.on("saved",(function(e){p(e)}))}));var h=Object(l.c)((function(e){return e.count})),m=Object(l.b)();function O(){return(O=Object(g.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),o){e.next=4;break}return console.log("Search value is empty"),e.abrupt("return");case 4:return e.t0=c,e.next=7,P.searchMovies(o);case 7:e.t1=e.sent,(0,e.t0)(e.t1);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){return x.apply(this,arguments)}function x(){return(x=Object(g.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.saveMovies(t);case 2:c(n.filter((function(e){return e!==t}))),X.emit("saved",t),m({type:"INCREMENT"});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(){alert("Maximum nominations reached - remove items from your list to continue")}return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(Y,{}),Object(r.jsx)(q,{}),d?Object(r.jsx)(U,{alert:d,buttonClick:function(){p(null)}}):null,Object(r.jsxs)("form",{className:"form-group",children:[Object(r.jsxs)("h2",{className:"filmSearch",children:[Object(r.jsx)("i",{className:"fas fa-film"}),"Film Search:"]}),Object(r.jsx)("input",{className:"form-control",placeholder:"Search List...",onChange:function(e){var t=e.target.value;u(t)}}),Object(r.jsx)("button",{className:"btn btn-success",type:"submit",onClick:function(e){return O.apply(this,arguments)},children:"Search"})]}),Object(r.jsxs)("h3",{className:"text-center",children:["Results - ",5-h," Nominations Remaining"]}),Object(r.jsx)("div",{className:"container",children:Object(r.jsx)("div",{className:"row",children:Object(r.jsx)("div",{className:"mx-auto",children:Object(r.jsx)("div",{className:"col-lg-12 col-xl-12",children:Object(r.jsx)("div",{className:"card-deck",children:void 0===n?Object(r.jsx)("h4",{className:"searchBegin",children:"Begin Search!"}):!1===n?Object(r.jsx)("h4",{className:"searchBegin",children:"No Results Found"}):n.map((function(e){return h<5?Object(r.jsx)(J,{movie:e,buttonClick:f,type:"NOMINATE"},e.imdbID):Object(r.jsx)(J,{movie:e,buttonClick:v,type:"X"},e.imdbID)}))})})})})}),Object(r.jsx)(H,{})]})},isPrivate:!0},{path:"/",component:G,isPrivate:!1}];var K=function(){return Object(r.jsx)(T,{children:Object(r.jsxs)(m.a,{children:[Object(r.jsx)(O.d,{children:z.map((function(e){return Object(r.jsx)(_,{path:e.path,component:e.component,isPrivate:e.isPrivate},e.path)}))}),Object(r.jsx)(O.b,{exact:!0,path:"/facebook",render:function(){return window.location="https://www.facebook.com/shopify/"}}),Object(r.jsx)(O.b,{exact:!0,path:"/linkedin",render:function(){return window.location="https://www.linkedin.com/company/shopify/"}}),Object(r.jsx)(O.b,{exact:!0,path:"/twitter",render:function(){return window.location="https://twitter.com/Shopify/"}})]})})},W=(n(133),Object(o.c)(h)),Z=Object(u.b)(W);i.a.render(Object(r.jsx)(l.a,{store:W,children:Object(r.jsx)(j.a,{persistor:Z,children:Object(r.jsx)(K,{})})}),document.getElementById("root"))},98:function(e,t,n){}},[[134,1,2]]]);
//# sourceMappingURL=main.b9f73f68.chunk.js.map